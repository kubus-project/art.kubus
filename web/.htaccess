<IfModule mod_headers.c>
  Header unset Content-Security-Policy
  Header set Content-Security-Policy "default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' 'wasm-unsafe-eval' https://fonts.googleapis.com https://accounts.google.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://accounts.google.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: blob: https:; connect-src 'self' https: wss: blob:; media-src 'self' blob: data: https:; worker-src 'self' blob:; object-src 'none'; frame-src 'self' https://accounts.google.com;"
</IfModule>

<IfModule mod_rewrite.c>
  RewriteEngine On
  # Avoid SPA rewrites serving index.html for missing source maps (noise in DevTools).
  RewriteCond %{REQUEST_URI} \.map$ [NC]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteRule ^ - [R=404,L]

  # Flutter web SPA deep links (e.g. /marker/<id>): serve index.html for any
  # route that isn't a real file or directory.
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^ index.html [L]
</IfModule>
